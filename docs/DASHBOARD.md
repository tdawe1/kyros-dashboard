# Project Dashboard

A comprehensive static dashboard published via GitHub Pages that provides real-time project visibility through automated rendering of roadmap and task board content.

## What's Rendered

### Roadmap Section
- **Source**: `project/roadmap.yml` → `ROADMAP.md` (via `scripts/roadmap_tree.py`)
- **Content**: Hierarchical project roadmap with status tracking
- **Features**:
  - Goal-oriented structure with parent/child relationships
  - Status indicators (queued, in_progress, review, done, blocked)
  - Owner assignments and priority levels
  - Progress tracking and completion metrics

### Task Board Section
- **Source**: `collaboration/state/tasks.json` → `collaboration/board.md` (via `scripts/generate_tasks_board.py`)
- **Content**: Now/Next/Review/Done task organization
- **Features**:
  - Real-time task status updates
  - Assignee and priority information
  - Label categorization
  - External ID linking (GitHub issues, Linear tickets, etc.)

## Live Dashboard

### Access
- **URL**: `https://<owner>.github.io/<repo>/` (auto-generated after workflow run)
- **GitHub Project Button**: Appears when `PROJECT_URL` secret is configured
- **Auto-refresh**: Content updates automatically on repository changes

### Publishing Workflow
The dashboard is published via `.github/workflows/publish_dashboard.yml` which:
1. **Triggers**: On push to `develop`/`main` branches or manual dispatch
2. **Builds**: Copies `site/` directory and generates missing content
3. **Deploys**: Uploads to GitHub Pages with proper permissions
4. **Notifies**: Posts to Discord webhooks if configured

## Autolinking System

### Configuration Files
- **`links.json`**: Generated by sync workflow, maps IDs to GitHub URLs
- **`config.json`**: Contains project URL and other dashboard settings

### Auto-linking Behavior
The dashboard automatically converts text patterns to clickable links:

#### Roadmap IDs
- Pattern: `[x] R2.1` or `[ ] R2.1.3`
- Links to: Corresponding GitHub Issue (if synced)
- Generated by: `scripts/roadmap_tree.py` + sync workflow

#### Task IDs
- Pattern: `- task-010` or `task-010:`
- Links to: Corresponding GitHub Issue (if synced)
- Generated by: `scripts/generate_tasks_board.py` + sync workflow

#### GitHub References
- Pattern: `GH#123` or `PR#456`
- Links to: `https://github.com/<owner>/<repo>/issues/123`
- Auto-detected from repository context

### Link Generation Process
1. **Sync Workflow**: `.github/workflows/sync_github_project.yml` creates GitHub issues
2. **Link Mapping**: Issues are mapped to roadmap/task IDs in `project/links.json`
3. **Dashboard Rendering**: JavaScript fetches `links.json` and applies autolinking
4. **Fallback**: If links.json missing, IDs remain as plain text

## Content Updates

### Roadmap Updates
```bash
# Edit roadmap structure
vim project/roadmap.yml

# Render to markdown
python scripts/roadmap_tree.py project/roadmap.yml ROADMAP.md

# Or trigger workflow
# Run "Update Roadmap" in GitHub Actions
```

### Task Board Updates
```bash
# Modify tasks via CLI
python scripts/collab_cli.py transition-task task-010 in_progress

# Generate board
python scripts/generate_tasks_board.py

# Or trigger workflow
# Run "Generate Project Board" in GitHub Actions
```

### Dashboard Publishing
```bash
# Manual publish
# Run "Publish Project Dashboard (Pages)" in GitHub Actions

# Automatic publish
# Triggers on push to develop/main with content changes
```

## Discord Integration

### Notification Types
- **Roadmap Updates**: When `project/roadmap.yml` changes
- **Board Updates**: When task statuses change
- **Dashboard Publishing**: When dashboard is published
- **Project Sync**: When GitHub Project is updated

### Configuration
Set these repository secrets:
- `DISCORD_WEBHOOK_URL`: General channel notifications
- `DISCORD_PM_WEBHOOK_URL`: Project management channel
- `PROJECT_URL`: GitHub Project URL (for dashboard button)

### Message Format
Discord notifications include:
- Rich formatting with titles and descriptions
- Direct links to GitHub issues, PRs, and projects
- Dashboard access links
- Repository context and ownership info

## Troubleshooting

### Dashboard Not Updating
1. Check GitHub Actions: Ensure "Publish Project Dashboard" workflow succeeded
2. Verify content: Confirm `ROADMAP.md` and `collaboration/board.md` exist
3. Manual trigger: Run "Publish Project Dashboard (Pages)" workflow manually

### Missing Project Button
1. Set `PROJECT_URL` secret in repository settings
2. Ensure secret format: `https://github.com/orgs/<org>/projects/<number>`
3. Re-run publish workflow after adding secret

### Links Not Clickable
1. Run sync workflow: "Sync Roadmap/Tasks to GitHub Issues + Project"
2. Verify `project/links.json` exists and contains mappings
3. Check GitHub Project configuration and field mapping

### Content Not Rendering
1. Verify source files exist: `project/roadmap.yml`, `collaboration/state/tasks.json`
2. Run generation scripts locally to test
3. Check workflow logs for Python errors
4. Ensure proper file permissions and paths
